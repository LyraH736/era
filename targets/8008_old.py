# 8008 with the new mnemonics
ISA_FEATURES = ('LITTLE','JUMP_NPC')
INSTRUCTION_ALIGNMENT = 0
PAD_BYTE = 0x00 # Prefered Byte to pad with

FORMATS = {
    '1b0':   (
        8,
        ('opcode',8)),
    '1b1':   (
        8,
        ('function',2),
        ('bank',2),
        ('port',3),
        ('opcode',1)),
    '1b2':   (
        8,
        ('function',2),
        ('port',5),
        ('opcode',1)),
    '1b3':   (
        8,
        ('function',2),
        ('imm',3),
        ('opcode',3)),
    '1b4':   (
        8,
        ('function',2),
        ('dest',3),
        ('source',3)),
    '2b0':   (
        16,
        ('imm',8),
        ('opcode',8)),
    '2b1':   (
        16,
        ('imm',8),
        ('function',2),
        ('dest',3),
        ('opcode',3)),
    '3b0':   (
        24,
        ('imm',16),
        ('opcode',8)),
    }

INSTRUCTIONS = {
    # CPU control
    ('hlt',):       ('1b0',('opcode',0b11111111)),
    # Input output
    ('inp','NUM'):  ('1b1',('function',0b01),('bank',0b00), ('opcode',0b1), ('port','NUM')),
    ('out','NUM'):  ('1b2',('function',0b01),('opcode',0b1),('port','NUM')),
    # Jumps
    ('jmp','NUM'):  ('3b0',('opcode',0b01000100),('imm','NUM')),
    ('jfc','NUM'):  ('3b0',('opcode',0b01000000),('imm','NUM')),
    ('jfz','NUM'):  ('3b0',('opcode',0b01001000),('imm','NUM')),
    ('jfs','NUM'):  ('3b0',('opcode',0b01010000),('imm','NUM')),
    ('jfp','NUM'):  ('3b0',('opcode',0b01011000),('imm','NUM')),
    ('jc','NUM'):   ('3b0',('opcode',0b01100000),('imm','NUM')),
    ('jz','NUM'):   ('3b0',('opcode',0b01101000),('imm','NUM')),
    ('js','NUM'):   ('3b0',('opcode',0b01110000),('imm','NUM')),
    ('jp','NUM'):   ('3b0',('opcode',0b01111000),('imm','NUM')),
    # Call
    ('cal','NUM'):  ('3b0',('opcode',0b01000110),('imm','NUM')),
    ('cfc','NUM'):  ('3b0',('opcode',0b01000010),('imm','NUM')),
    ('cfz','NUM'):  ('3b0',('opcode',0b01001010),('imm','NUM')),
    ('cfs','NUM'):  ('3b0',('opcode',0b01010010),('imm','NUM')),
    ('cfp','NUM'):  ('3b0',('opcode',0b01011010),('imm','NUM')),
    ('cc','NUM'):   ('3b0',('opcode',0b01100010),('imm','NUM')),
    ('cz','NUM'):   ('3b0',('opcode',0b01101010),('imm','NUM')),
    ('cs','NUM'):   ('3b0',('opcode',0b01110010),('imm','NUM')),
    ('cp','NUM'):   ('3b0',('opcode',0b01111010),('imm','NUM')),
    # Return
    ('ret',):       ('1b0',('opcode',0b00000111)),
    ('rfc',):       ('3b0',('opcode',0b00000011)),
    ('rfz',):       ('3b0',('opcode',0b00001011)),
    ('rfs',):       ('3b0',('opcode',0b00010011)),
    ('rfp',):       ('3b0',('opcode',0b00011011)),
    ('rc',):        ('3b0',('opcode',0b00100011)),
    ('rz',):        ('3b0',('opcode',0b00101011)),
    ('rs',):        ('3b0',('opcode',0b00110011)),
    ('rp',):        ('3b0',('opcode',0b00111011)),
    ('rst','NUM'):  ('1b3',('function',0b00),('opcode',0b101),('imm','NUM')),
    # Load
    ('laa'):        ('1b4',('function',0b11),('dest',0b000),('source',0b000)),
    ('lab'):        ('1b4',('function',0b11),('dest',0b000),('source',0b001)),
    ('lac'):        ('1b4',('function',0b11),('dest',0b000),('source',0b010)),
    ('lad'):        ('1b4',('function',0b11),('dest',0b000),('source',0b011)),
    ('lae'):        ('1b4',('function',0b11),('dest',0b000),('source',0b100)),
    ('lah'):        ('1b4',('function',0b11),('dest',0b000),('source',0b101)),
    ('lal'):        ('1b4',('function',0b11),('dest',0b000),('source',0b110)),
    ('lba'):        ('1b4',('function',0b11),('dest',0b001),('source',0b000)),
    ('lbb'):        ('1b4',('function',0b11),('dest',0b001),('source',0b001)),
    ('lbc'):        ('1b4',('function',0b11),('dest',0b001),('source',0b010)),
    ('lbd'):        ('1b4',('function',0b11),('dest',0b001),('source',0b011)),
    ('lbe'):        ('1b4',('function',0b11),('dest',0b001),('source',0b100)),
    ('lbh'):        ('1b4',('function',0b11),('dest',0b001),('source',0b101)),
    ('lbl'):        ('1b4',('function',0b11),('dest',0b001),('source',0b110)),
    ('lca'):        ('1b4',('function',0b11),('dest',0b010),('source',0b000)),
    ('lcb'):        ('1b4',('function',0b11),('dest',0b010),('source',0b001)),
    ('lcc'):        ('1b4',('function',0b11),('dest',0b010),('source',0b010)),
    ('lcd'):        ('1b4',('function',0b11),('dest',0b010),('source',0b011)),
    ('lce'):        ('1b4',('function',0b11),('dest',0b010),('source',0b100)),
    ('lch'):        ('1b4',('function',0b11),('dest',0b010),('source',0b101)),
    ('lcl'):        ('1b4',('function',0b11),('dest',0b010),('source',0b110)),
    ('lda'):        ('1b4',('function',0b11),('dest',0b011),('source',0b000)),
    ('ldb'):        ('1b4',('function',0b11),('dest',0b011),('source',0b001)),
    ('ldc'):        ('1b4',('function',0b11),('dest',0b011),('source',0b010)),
    ('ldd'):        ('1b4',('function',0b11),('dest',0b011),('source',0b011)),
    ('lde'):        ('1b4',('function',0b11),('dest',0b011),('source',0b100)),
    ('ldh'):        ('1b4',('function',0b11),('dest',0b011),('source',0b101)),
    ('ldl'):        ('1b4',('function',0b11),('dest',0b011),('source',0b110)),
    ('lea'):        ('1b4',('function',0b11),('dest',0b100),('source',0b000)),
    ('leb'):        ('1b4',('function',0b11),('dest',0b100),('source',0b001)),
    ('lec'):        ('1b4',('function',0b11),('dest',0b100),('source',0b010)),
    ('led'):        ('1b4',('function',0b11),('dest',0b100),('source',0b011)),
    ('lee'):        ('1b4',('function',0b11),('dest',0b100),('source',0b100)),
    ('leh'):        ('1b4',('function',0b11),('dest',0b100),('source',0b101)),
    ('lel'):        ('1b4',('function',0b11),('dest',0b100),('source',0b110)),
    ('lha'):        ('1b4',('function',0b11),('dest',0b101),('source',0b000)),
    ('lhb'):        ('1b4',('function',0b11),('dest',0b101),('source',0b001)),
    ('lhc'):        ('1b4',('function',0b11),('dest',0b101),('source',0b010)),
    ('lhd'):        ('1b4',('function',0b11),('dest',0b101),('source',0b011)),
    ('lhe'):        ('1b4',('function',0b11),('dest',0b101),('source',0b100)),
    ('lhh'):        ('1b4',('function',0b11),('dest',0b101),('source',0b101)),
    ('lhl'):        ('1b4',('function',0b11),('dest',0b101),('source',0b110)),
    ('lla'):        ('1b4',('function',0b11),('dest',0b110),('source',0b000)),
    ('llb'):        ('1b4',('function',0b11),('dest',0b110),('source',0b001)),
    ('llc'):        ('1b4',('function',0b11),('dest',0b110),('source',0b010)),
    ('lld'):        ('1b4',('function',0b11),('dest',0b110),('source',0b011)),
    ('lle'):        ('1b4',('function',0b11),('dest',0b110),('source',0b100)),
    ('llh'):        ('1b4',('function',0b11),('dest',0b110),('source',0b101)),
    ('lll'):        ('1b4',('function',0b11),('dest',0b110),('source',0b110)),
    ('lam'):        ('1b4',('function',0b11),('dest',0b000),('source',0b111)),
    ('lbm'):        ('1b4',('function',0b11),('dest',0b001),('source',0b111)),
    ('lcm'):        ('1b4',('function',0b11),('dest',0b010),('source',0b111)),
    ('ldm'):        ('1b4',('function',0b11),('dest',0b011),('source',0b111)),
    ('lem'):        ('1b4',('function',0b11),('dest',0b100),('source',0b111)),
    ('lhm'):        ('1b4',('function',0b11),('dest',0b101),('source',0b111)),
    ('llm'):        ('1b4',('function',0b11),('dest',0b110),('source',0b111)),
    ('lma'):        ('1b4',('function',0b11),('dest',0b111),('source',0b000)),
    ('lmb'):        ('1b4',('function',0b11),('dest',0b111),('source',0b001)),
    ('lmc'):        ('1b4',('function',0b11),('dest',0b111),('source',0b010)),
    ('lmd'):        ('1b4',('function',0b11),('dest',0b111),('source',0b011)),
    ('lme'):        ('1b4',('function',0b11),('dest',0b111),('source',0b100)),
    ('lmh'):        ('1b4',('function',0b11),('dest',0b111),('source',0b101)),
    ('lml'):        ('1b4',('function',0b11),('dest',0b111),('source',0b110)),
    ('lai','NUM'):  ('2b1',('opcode',0b110),('function',0b00),('dest',0b000),('imm','NUM')),
    ('lbi','NUM'):  ('2b1',('opcode',0b110),('function',0b00),('dest',0b001),('imm','NUM')),
    ('lci','NUM'):  ('2b1',('opcode',0b110),('function',0b00),('dest',0b010),('imm','NUM')),
    ('ldi','NUM'):  ('2b1',('opcode',0b110),('function',0b00),('dest',0b011),('imm','NUM')),
    ('lei','NUM'):  ('2b1',('opcode',0b110),('function',0b00),('dest',0b100),('imm','NUM')),
    ('lhi','NUM'):  ('2b1',('opcode',0b110),('function',0b00),('dest',0b101),('imm','NUM')),
    ('lli','NUM'):  ('2b1',('opcode',0b110),('function',0b00),('dest',0b110),('imm','NUM')),
    ('lmi','NUM'):  ('2b1',('opcode',0b110),('function',0b00),('dest',0b111),('imm','NUM')),
    # arithmetic
    ('adi','NUM'):  ('2b0',('opcode',0b00000100),('imm','NUM')),
    ('aci','NUM'):  ('2b0',('opcode',0b00001100),('imm','NUM')),
    ('sui','NUM'):  ('2b0',('opcode',0b00010100),('imm','NUM')),
    ('ani','NUM'):  ('2b0',('opcode',0b00100100),('imm','NUM')),
    ('xri','NUM'):  ('2b0',('opcode',0b00101100),('imm','NUM')),
    ('ori','NUM'):  ('2b0',('opcode',0b00110100),('imm','NUM')),
    ('cpi','NUM'):  ('2b0',('opcode',0b00111100),('imm','NUM')),
    ('ada'):        ('1b4',('function',0b10),('dest',0b000),('source',0b000)),
    ('adb'):        ('1b4',('function',0b10),('dest',0b000),('source',0b001)),
    ('adc'):        ('1b4',('function',0b10),('dest',0b000),('source',0b010)),
    ('add'):        ('1b4',('function',0b10),('dest',0b000),('source',0b011)),
    ('ade'):        ('1b4',('function',0b10),('dest',0b000),('source',0b100)),
    ('adh'):        ('1b4',('function',0b10),('dest',0b000),('source',0b101)),
    ('adl'):        ('1b4',('function',0b10),('dest',0b000),('source',0b110)),
    ('adm'):        ('1b4',('function',0b10),('dest',0b000),('source',0b111)),
    ('aca'):        ('1b4',('function',0b10),('dest',0b001),('source',0b000)),
    ('acb'):        ('1b4',('function',0b10),('dest',0b001),('source',0b001)),
    ('acc'):        ('1b4',('function',0b10),('dest',0b001),('source',0b010)),
    ('acd'):        ('1b4',('function',0b10),('dest',0b001),('source',0b011)),
    ('ace'):        ('1b4',('function',0b10),('dest',0b001),('source',0b100)),
    ('ach'):        ('1b4',('function',0b10),('dest',0b001),('source',0b101)),
    ('acl'):        ('1b4',('function',0b10),('dest',0b001),('source',0b110)),
    ('acm'):        ('1b4',('function',0b10),('dest',0b001),('source',0b111)),
    ('sua'):        ('1b4',('function',0b10),('dest',0b010),('source',0b000)),
    ('sub'):        ('1b4',('function',0b10),('dest',0b010),('source',0b001)),
    ('suc'):        ('1b4',('function',0b10),('dest',0b010),('source',0b010)),
    ('sud'):        ('1b4',('function',0b10),('dest',0b010),('source',0b011)),
    ('sue'):        ('1b4',('function',0b10),('dest',0b010),('source',0b100)),
    ('suh'):        ('1b4',('function',0b10),('dest',0b010),('source',0b101)),
    ('sul'):        ('1b4',('function',0b10),('dest',0b010),('source',0b110)),
    ('sum'):        ('1b4',('function',0b10),('dest',0b010),('source',0b111)),
    ('sba'):        ('1b4',('function',0b10),('dest',0b011),('source',0b000)),
    ('sbb'):        ('1b4',('function',0b10),('dest',0b011),('source',0b001)),
    ('sbc'):        ('1b4',('function',0b10),('dest',0b011),('source',0b010)),
    ('sbd'):        ('1b4',('function',0b10),('dest',0b011),('source',0b011)),
    ('sbe'):        ('1b4',('function',0b10),('dest',0b011),('source',0b100)),
    ('sbh'):        ('1b4',('function',0b10),('dest',0b011),('source',0b101)),
    ('sbl'):        ('1b4',('function',0b10),('dest',0b011),('source',0b110)),
    ('sbm'):        ('1b4',('function',0b10),('dest',0b011),('source',0b111)),
    ('nda'):        ('1b4',('function',0b10),('dest',0b100),('source',0b000)),
    ('ndb'):        ('1b4',('function',0b10),('dest',0b100),('source',0b001)),
    ('ndc'):        ('1b4',('function',0b10),('dest',0b100),('source',0b010)),
    ('ndd'):        ('1b4',('function',0b10),('dest',0b100),('source',0b011)),
    ('nde'):        ('1b4',('function',0b10),('dest',0b100),('source',0b100)),
    ('ndh'):        ('1b4',('function',0b10),('dest',0b100),('source',0b101)),
    ('ndl'):        ('1b4',('function',0b10),('dest',0b100),('source',0b110)),
    ('ndm'):        ('1b4',('function',0b10),('dest',0b100),('source',0b111)),
    ('xra'):        ('1b4',('function',0b10),('dest',0b101),('source',0b000)),
    ('xrb'):        ('1b4',('function',0b10),('dest',0b101),('source',0b001)),
    ('xrc'):        ('1b4',('function',0b10),('dest',0b101),('source',0b010)),
    ('xrd'):        ('1b4',('function',0b10),('dest',0b101),('source',0b011)),
    ('xre'):        ('1b4',('function',0b10),('dest',0b101),('source',0b100)),
    ('xrh'):        ('1b4',('function',0b10),('dest',0b101),('source',0b101)),
    ('xrl'):        ('1b4',('function',0b10),('dest',0b101),('source',0b110)),
    ('xrm'):        ('1b4',('function',0b10),('dest',0b101),('source',0b111)),
    ('ora'):        ('1b4',('function',0b10),('dest',0b110),('source',0b000)),
    ('orb'):        ('1b4',('function',0b10),('dest',0b110),('source',0b001)),
    ('orc'):        ('1b4',('function',0b10),('dest',0b110),('source',0b010)),
    ('ord'):        ('1b4',('function',0b10),('dest',0b110),('source',0b011)),
    ('ore'):        ('1b4',('function',0b10),('dest',0b110),('source',0b100)),
    ('orh'):        ('1b4',('function',0b10),('dest',0b110),('source',0b101)),
    ('orl'):        ('1b4',('function',0b10),('dest',0b110),('source',0b110)),
    ('orm'):        ('1b4',('function',0b10),('dest',0b110),('source',0b111)),
    ('cpa'):        ('1b4',('function',0b10),('dest',0b111),('source',0b000)),
    ('cpb'):        ('1b4',('function',0b10),('dest',0b111),('source',0b001)),
    ('cpc'):        ('1b4',('function',0b10),('dest',0b111),('source',0b010)),
    ('cpd'):        ('1b4',('function',0b10),('dest',0b111),('source',0b011)),
    ('cpe'):        ('1b4',('function',0b10),('dest',0b111),('source',0b100)),
    ('cph'):        ('1b4',('function',0b10),('dest',0b111),('source',0b101)),
    ('cpl'):        ('1b4',('function',0b10),('dest',0b111),('source',0b110)),
    ('cpm'):        ('1b4',('function',0b10),('dest',0b111),('source',0b111)),
	
    ('ina'):        ('1b4',('function',0b10),('dest',0b000),('source',0b000)),
    ('inb'):        ('1b4',('function',0b10),('dest',0b001),('source',0b000)),
    ('inc'):        ('1b4',('function',0b10),('dest',0b010),('source',0b000)),
    ('ind'):        ('1b4',('function',0b10),('dest',0b011),('source',0b000)),
    ('ine'):        ('1b4',('function',0b10),('dest',0b100),('source',0b000)),
    ('inh'):        ('1b4',('function',0b10),('dest',0b101),('source',0b000)),
    ('inl'):        ('1b4',('function',0b10),('dest',0b110),('source',0b000)),
	
    ('dca'):        ('1b4',('function',0b10),('dest',0b000),('source',0b001)),
    ('dcb'):        ('1b4',('function',0b10),('dest',0b001),('source',0b001)),
    ('dcc'):        ('1b4',('function',0b10),('dest',0b010),('source',0b001)),
    ('dcd'):        ('1b4',('function',0b10),('dest',0b011),('source',0b001)),
    ('dce'):        ('1b4',('function',0b10),('dest',0b100),('source',0b001)),
    ('dch'):        ('1b4',('function',0b10),('dest',0b101),('source',0b001)),
    ('dcl'):        ('1b4',('function',0b10),('dest',0b110),('source',0b001)),
    # Rotate
    ('rlc',): ('1b0',('opcode',0b00000010)),
    ('rrc',): ('1b0',('opcode',0b00001010)),
    ('ral',): ('1b0',('opcode',0b00010010)),
    ('rar',): ('1b0',('opcode',0b00011010)),
    }
